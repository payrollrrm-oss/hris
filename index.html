<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem HRIS - Manajemen Karyawan</title>
    <!-- Preload critical resources -->
    <link rel="preload" href="styles.min.css" as="style">
    <link rel="preload" href="script.min.js" as="script">
    <link rel="preload" href="config.js" as="script">
    <!-- Cache control -->
    <meta http-equiv="Cache-Control" content="public, max-age=31536000">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="styles.min.css" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="spinner"></div>
    </div>

    <!-- Login Screen -->
    <div id="loginScreen" style="display: none;">
        <div class="login-container">
            <h2><i class="fas fa-user-circle"></i> Login HRIS</h2>
            <form onsubmit="login(); return false;">
                <div class="form-group">
                    <label for="emailInput">Email</label>
                    <input type="email" id="emailInput" class="form-control" placeholder="Masukkan email" required>
                </div>
                <button type="submit" class="btn btn-primary w-100">Login</button>
            </form>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" style="display: none;">
        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid">
                <button class="menu-toggle d-lg-none" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
                <span class="navbar-brand">Sistem HRIS</span>
                <div class="nav-user">
                    <div class="user-info">
                        <div class="user-name" id="userName"></div>
                        <div class="user-role" id="userRole"></div>
                    </div>
                    <button class="btn btn-sm btn-outline-danger" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </div>
            </div>
        </nav>

        <div class="container-fluid">
            <div class="row">
                <!-- Sidebar -->
                <div class="col-lg-3 col-md-4 sidebar" id="sidebar">
                    <div id="menuContainer">
                        <!-- Menu items will be loaded here -->
                    </div>
                </div>

                <!-- Content Area -->
                <div class="col-lg-9 col-md-8 content-area" id="contentArea">
                    <!-- Content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Employee Modal -->
    <div class="modal fade" id="employeeModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Data Karyawan</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="employeeForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="nrp" class="form-label">NRP</label>
                                    <input type="text" class="form-control" id="nrp" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="nama" class="form-label">Nama</label>
                                    <input type="text" class="form-control" id="nama" required>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="email" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="email" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="statusPernikahan" class="form-label">Status Pernikahan</label>
                                    <select class="form-select" id="statusPernikahan" required>
                                        <option value="">Pilih Status</option>
                                        <option value="Lajang">Lajang</option>
                                        <option value="Menikah">Menikah</option>
                                        <option value="Cerai">Cerai</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="jabatan" class="form-label">Jabatan</label>
                                    <input type="text" class="form-control" id="jabatan" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="under" class="form-label">Under</label>
                                    <input type="text" class="form-control" id="under" required>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="statusKaryawan" class="form-label">Status Karyawan</label>
                                    <select class="form-select" id="statusKaryawan" required>
                                        <option value="">Pilih Status</option>
                                        <option value="Aktif">Aktif</option>
                                        <option value="Nonaktif">Nonaktif</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="role" class="form-label">Role</label>
                                    <select class="form-select" id="role" required>
                                        <option value="">Pilih Role</option>
                                        <option value="karyawan">Karyawan</option>
                                        <option value="admin">Admin</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" id="saveEmployeeBtn">Simpan</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Attendance Modal -->
    <div class="modal fade" id="attendanceModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Input Absensi</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="attendanceForm">
                        <div class="mb-3">
                            <label for="attendanceDate" class="form-label">Tanggal</label>
                            <input type="date" class="form-control" id="attendanceDate" required>
                        </div>
                        <div class="mb-3">
                            <label for="attendanceStatus" class="form-label">Status</label>
                            <select class="form-select" id="attendanceStatus" required>
                                <option value="">Pilih Status</option>
                                <option value="Hadir Masuk">Hadir Masuk</option>
                                <option value="Hadir Pulang">Hadir Pulang</option>
                                <option value="Off">Off</option>
                                <option value="Sakit">Sakit</option>
                                <option value="Alfa">Alfa</option>
                                <option value="Cuti">Cuti</option>
                                <option value="Induksi">Induksi</option>
                                <option value="MCU">MCU</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="attendanceShift" class="form-label">Shift</label>
                            <select class="form-select" id="attendanceShift" required>
                                <option value="">Pilih Shift</option>
                                <option value="Shift 1">Shift 1</option>
                                <option value="Shift 2">Shift 2</option>
                            </select>
                        </div>
                        <div class="mb-3" id="cutiDateGroup" style="display: none;">
                            <div class="row">
                                <div class="col-md-6">
                                    <label for="cutiStartDate" class="form-label">Tanggal Mulai Cuti</label>
                                    <input type="date" class="form-control" id="cutiStartDate">
                                </div>
                                <div class="col-md-6">
                                    <label for="cutiEndDate" class="form-label">Tanggal Selesai Cuti</label>
                                    <input type="date" class="form-control" id="cutiEndDate">
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" id="saveAttendanceBtn">Simpan</button>
                </div>
            </div>
        </div>
    </div>

    <!-- K3 Report Modal -->
    <div class="modal fade" id="k3Modal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Laporan K3</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="k3Form">
                        <div class="mb-3">
                            <label for="k3Date" class="form-label">Tanggal Laporan</label>
                            <input type="date" class="form-control" id="k3Date" required>
                        </div>
                        <div class="mb-3">
                            <label for="k3Description" class="form-label">Uraian Laporan</label>
                            <textarea class="form-control" id="k3Description" rows="4" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="k3Photo" class="form-label">Foto Laporan</label>
                            <input type="file" class="form-control" id="k3Photo" accept="image/*">
                        </div>
                        <div class="mb-3" id="k3StatusGroup" style="display: none;">
                            <label for="k3Status" class="form-label">Status Proses</label>
                            <select class="form-select" id="k3Status">
                                <option value="Belum">Belum</option>
                                <option value="Selesai">Selesai</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" id="saveK3Btn">Simpan</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MCU Request Modal -->
    <div class="modal fade" id="mcuModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Permohonan MCU</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="mcuForm">
                        <div class="mb-3">
                            <label for="mcuRequestDate" class="form-label">Tanggal Permohonan</label>
                            <input type="date" class="form-control" id="mcuRequestDate" required>
                        </div>
                        <div class="mb-3">
                            <label for="mcuReason" class="form-label">Alasan MCU</label>
                            <textarea class="form-control" id="mcuReason" rows="3" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="mcuPlannedDate" class="form-label">Tanggal Rencana MCU</label>
                            <input type="date" class="form-control" id="mcuPlannedDate" required>
                        </div>
                        <div class="mb-3" id="mcuStatusGroup" style="display: none;">
                            <label for="mcuStatus" class="form-label">Status Proses</label>
                            <select class="form-select" id="mcuStatus">
                                <option value="Pending">Pending</option>
                                <option value="Disetujui">Disetujui</option>
                                <option value="Ditolak">Ditolak</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" id="saveMcuBtn">Simpan</button>
                </div>
            </div>
        </div>
    </div>

    <!-- APD Request Modal -->
    <div class="modal fade" id="apdModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Permintaan APD</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="apdForm">
                        <div class="mb-3">
                            <label for="apdDate" class="form-label">Tanggal Permintaan</label>
                            <input type="date" class="form-control" id="apdDate" required>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="apdShoes" class="form-label">Nomor Sepatu</label>
                                    <input type="number" class="form-control" id="apdShoes" min="30" max="50" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="apdShirt" class="form-label">Nomor Baju</label>
                                    <select class="form-select" id="apdShirt" required>
                                        <option value="">Pilih Ukuran</option>
                                        <option value="XS">XS</option>
                                        <option value="S">S</option>
                                        <option value="M">M</option>
                                        <option value="L">L</option>
                                        <option value="XL">XL</option>
                                        <option value="XXL">XXL</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="apdPants" class="form-label">Nomor Celana</label>
                                    <select class="form-select" id="apdPants" required>
                                        <option value="">Pilih Ukuran</option>
                                        <option value="28">28</option>
                                        <option value="30">30</option>
                                        <option value="32">32</option>
                                        <option value="34">34</option>
                                        <option value="36">36</option>
                                        <option value="38">38</option>
                                        <option value="40">40</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="apdGlasses" class="form-label">Kacamata</label>
                                    <select class="form-select" id="apdGlasses" required>
                                        <option value="">Pilih</option>
                                        <option value="Ya">Ya</option>
                                        <option value="Tidak">Tidak</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="apdHelmet" class="form-label">Warna Helm</label>
                            <select class="form-select" id="apdHelmet" required>
                                <option value="">Pilih Warna</option>
                                <option value="Putih">Putih</option>
                                <option value="Kuning">Kuning</option>
                                <option value="Merah">Merah</option>
                                <option value="Biru">Biru</option>
                                <option value="Hijau">Hijau</option>
                            </select>
                        </div>
                        <div class="mb-3" id="apdStatusGroup" style="display: none;">
                            <label for="apdStatus" class="form-label">Status Proses</label>
                            <select class="form-select" id="apdStatus">
                                <option value="Pending">Pending</option>
                                <option value="Disetujui">Disetujui</option>
                                <option value="Ditolak">Ditolak</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" id="saveApdBtn">Simpan</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Configuration -->
    <script src="config.js"></script>
    <!-- Loading Manager -->
    <script src="loading.js"></script>
    <!-- Google Apps Script API -->
    <script src="script.min.js"></script>
    <script src="modules.js"></script>
    <script src="functions.js"></script>
</body>
</html>
